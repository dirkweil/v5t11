<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
  xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:p="http://primefaces.org/ui">

<h:head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <title>V5T11: System Control</title>
</h:head>

<h:body>
  <h:form prependId="false">
    <p:growl id="msgs" showDetail="true" />

    <p:fieldset legend="Allgemein">
      <h:panelGrid columns="2">
        <p:outputLabel for="gleisspannung" value="Gleisspannung: " />
        <p:selectBooleanButton id="gleisspannung" value="#{systemControlPresenter.gleisspannung}" onLabel="an" offLabel="aus" style="width:60px">
          <p:ajax />
        </p:selectBooleanButton>
      </h:panelGrid>
    </p:fieldset>

    <p:fieldset legend="Fahrweg">
      <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
        <p:outputLabel for="bereich" value="Bereich:" />
        <p:selectOneMenu id="bereich" value="#{systemControlPresenter.bereich}" style="width:125px">
          <f:selectItems value="#{systemControlPresenter.bereiche}" />
          <p:ajax event="itemSelect" update="weiche signal" />
        </p:selectOneMenu>

        <p:outputLabel for="weiche" value="Weiche:" />
        <h:panelGroup id="weiche">
          <p:selectOneMenu value="#{systemControlPresenter.weichenName}" style="width:125px">
            <f:selectItems value="#{systemControlPresenter.weichen}" var="weiche" itemLabel="#{weiche.name}" itemValue="#{weiche.name}" />
            <p:ajax event="itemSelect" update="weiche" />
          </p:selectOneMenu>
          <p:selectOneButton value="#{systemControlPresenter.weichenStellung}">
            <f:selectItems value="#{systemControlPresenter.weichenStellungen}" />
            <p:ajax />
          </p:selectOneButton>
        </h:panelGroup>

        <p:outputLabel for="signal" value="Signal:" />
        <h:panelGroup id="signal">
          <p:selectOneMenu value="#{systemControlPresenter.signalName}" style="width:125px">
            <f:selectItems value="#{systemControlPresenter.signale}" var="signal" itemLabel="#{signal.name}" itemValue="#{signal.name}" />
            <p:ajax event="itemSelect" update="signal" />
          </p:selectOneMenu>
          <p:selectOneButton value="#{systemControlPresenter.signalStellung}">
            <f:selectItems value="#{systemControlPresenter.signalStellungen}" />
            <p:ajax />
          </p:selectOneButton>
        </h:panelGroup>

      </h:panelGrid>
    </p:fieldset>

    <p:fieldset legend="Lok">
      <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
        <p:outputLabel for="lok" value="Lok:" />
        <h:panelGroup id="lok">
          <p:selectOneMenu id="lokId" value="#{systemControlPresenter.lokId}" style="width:125px">
            <f:selectItems value="#{systemControlPresenter.loks}" var="lok" itemLabel="#{lok.id}" itemValue="#{lok.id}" />
            <p:ajax event="itemSelect" update="lokAktiv lokFunktionen lokRueckwaerts lokFahrstufe" />
          </p:selectOneMenu>
          <p:selectBooleanButton id="lokAktiv" value="#{systemControlPresenter.lokAktiv}" onLabel="aktiv" offLabel="inaktiv" style="width:120px">
            <p:ajax />
          </p:selectBooleanButton>
        </h:panelGroup>

        <p:outputLabel for="lokFahrstufe" value="Fahrstufe:" />
        <h:panelGrid id="lokFahrstufe" columns="2">
          <p:inputText id="fahrstufe" value="#{systemControlPresenter.lokFahrstufe}" />
          <p:selectBooleanButton id="lokRueckwaerts" value="#{systemControlPresenter.lokRueckwaerts}" onLabel="rückwärts" offLabel="vorwärts" style="width:120px">
            <p:ajax />
          </p:selectBooleanButton>
          <p:slider for="fahrstufe" minValue="0" maxValue="#{systemControlPresenter.lokMaxFahrstufe}">
            <p:ajax process="fahrstufe" />
          </p:slider>
        </h:panelGrid>

        <p:outputLabel for="lokFunktionen" value="Funktionen:" />
        <h:panelGroup id="lokFunktionen">
          <!--           <p:selectBooleanButton id="lokLicht" value="#{systemControlPresenter.lokLicht}" onLabel="Licht" offLabel="Licht" style="width:120px"> -->
          <!--             <p:ajax /> -->
          <!--           </p:selectBooleanButton> -->
          <p:selectManyButton value="#{systemControlPresenter.lokFunktionen}">
            <!--             <f:selectItem itemLabel="Licht" itemValue="#{systemControlPresenter.lokLichtFunktionsNummer}" /> -->
            <f:selectItems value="#{systemControlPresenter.lokFunktionConfigs}" var="fc" itemLabel="#{fc.value.beschreibung}" itemValue="#{fc.key}" />
            <p:ajax />
          </p:selectManyButton>
        </h:panelGroup>
      </h:panelGrid>
    </p:fieldset>
  </h:form>

</h:body>
</html>
