<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<ui:composition template="/WEB-INF/templates/leitstand.xhtml">
  <ui:define name="content">
    <h:outputStylesheet name="stellwerk.css"/>

    Huhu!

    <div class="stellwerk">
      <canvas id="myCanvas" width="40" height="40">
        Your browser does not support the HTML canvas tag.
      </canvas>
    </div>

    <script>
      var c = document.getElementById("myCanvas");
      var ctx = c.getContext("2d");
      ctx.moveTo(0, 100);
      ctx.lineTo(200, 0);
      ctx.stroke();
    </script>

    <f:websocket channel="stellwerk" onmessage="updateElement"/>

    <script>
      function updateElement(message) {
        console.log('updateElement: ' + JSON.stringify(message));

        var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");
        ctx.moveTo(0, 0);
        ctx.lineTo(200, 100);
        ctx.stroke();
      }
    </script>
  </ui:define>
</ui:composition>
</html>
