<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
  xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:p="http://primefaces.org/ui">

<ui:composition template="/WEB-INF/templates/fahrzeugManagement.xhtml">
  <ui:define name="content">
    <h:form id="form">

      <p:dataGrid var="fahrzeug" value="#{fahrzeugPresenter.fahrzeuge}" layout="grid" columns="4">
        <p:column>
          <p:panelGrid styleClass="width100Percent" >
            <f:facet name="header">
              <p:row>
                <p:column colspan="2">
                  <h:outputText value="#{fahrzeug.betriebsnummer}" />
                </p:column>
              </p:row>
            </f:facet>

            <p:row>
              <p:column rowspan="2" styleClass="width60Percent">
                <p:graphicImage name="#{fahrzeugPresenter.getImage(fahrzeug)}" style="height: auto; max-height: 50px; width: auto; max-width=200px;" />
              </p:column>

              <p:column styleClass="rightAligned">
                <h:panelGroup>
                  <p:commandButton action="#{fahrzeugPresenter.control(fahrzeug)}" icon="pi pi-sliders-v" title="steuern" ajax="false" />
                  <p:selectBooleanButton onLabel="1" offLabel="1" value="#{fahrzeugPresenter.getLokcontrollerAdapter(fahrzeug,0).assigned}">
                    <p:ajax update="@form"/>
                  </p:selectBooleanButton>
                  <p:selectBooleanButton onLabel="2" offLabel="2" value="#{fahrzeugPresenter.getLokcontrollerAdapter(fahrzeug,1).assigned}">
                    <p:ajax update="@form"/>
                  </p:selectBooleanButton>
                </h:panelGroup>
              </p:column>
            </p:row>

            <p:row>
              <p:column styleClass="rightAligned">
                <h:panelGroup>
                  <p:commandButton action="#{fahrzeugPresenter.edit(fahrzeug)}" icon="fa fa-edit" title="bearbeiten" ajax="false" />
                  <p:commandButton action="#{fahrzeugPresenter.program(fahrzeug)}" icon="fa fa-cog" title="programmieren" ajax="false" />
                </h:panelGroup>
              </p:column>
            </p:row>
          </p:panelGrid>
        </p:column>
      </p:dataGrid>
      
      <p:commandButton value="Neu" icon="fa fa-plus-square" action="create" ajax="false"/>
    </h:form>
  </ui:define>
</ui:composition>
</html>
