<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <title>${title} - v5t11</title>
</h:head>

<h:body>
  <p:growl id="messages" showDetail="false"/>
  <p:splitter style="height: 100%; width: 100%">
    <p:splitterPanel size="20">
      <p:splitter layout="vertical" style="height: 100%; width: 100%">
        <p:splitterPanel size="70" style="background: white">
          <h:form id="navigation">
            <p:menu model="#{navigationPresenter.menuModel}" style="width: 98%; border: none; background: white"/>
          </h:form>
        </p:splitterPanel>
        <p:splitterPanel size="30" style="background: white">
          <ui:insert name="extra"/>
        </p:splitterPanel>
      </p:splitter>
    </p:splitterPanel>


    <p:splitterPanel size="80" style="background: whitesmoke">
      <ui:insert name="content"/>
    </p:splitterPanel>
  </p:splitter>

  <p:remoteCommand name="updateMenu" update=":navigation"/>

  <!--
    Das JSF-Tag funktioniert mit Quarkus/MyFaces nicht. Daher JS-Workaround.
    <f:websocket channel="menu-refresh" onmessage="updateMenu"/>
    -->
  <h:outputScript target="body">
    let menuRefreshSocket = new WebSocket("ws://" + window.location.host + "/jakarta.faces.push/menu-refresh");
    menuRefreshSocket.onmessage = function (event) {
      updateMenu();
    }
  </h:outputScript>

  <h:outputStylesheet name="primeicons/primeicons.css" library="primefaces"/>
  <h:outputStylesheet library="webjars" name="primeflex/primeflex.css"/>
  <h:outputStylesheet name="v5t11.css"/>
</h:body>
</html>
